import{_ as V,d as x,r as i,o as z,c as C,f as e,t as o,H as y,C as s,b as w}from"./index-87c3fdd7.js";const S={data(){return{columns:[{title:"类型",dataIndex:"content",align:"center"},{title:"信息",dataIndex:"tip",align:"center"},{title:"足环",dataIndex:"ringNumber",align:"center"},{title:"时间",dataIndex:"time",align:"center"},{title:"人员",dataIndex:"author",align:"center"}],data:[],paginationProps:{total:0,current:1,pageSize:10,showPageSize:!0,pageSizeOptions:[5,10,20,30,40,50,"所有"],showJumper:!0,showTotal:!0},condition:{content:null,tip:null,ringNumber:null,timeRange:null,author:null},contentOptions:[{label:"新增",value:0},{label:"修改",value:1},{label:"删除",value:2},{label:"共享血统",value:3},{label:"接收血统",value:4},{label:"关联血亲",value:5},{label:"解除血亲",value:6},{label:"转移鸽棚巢箱",value:7},{label:"其他",value:8}]}},methods:{getPage(){const l=this.condition,n=this.paginationProps;x({method:"POST",url:"oplog",data:{content:l.content||null,tip:l.tip||null,ringNumber:l.ringNumber||null,timeRange:l.timeRange,author:l.author||null,current:n.current,pageSize:n.pageSize}}).then(d=>{if(d.data.code===200){const p=d.data.data;this.data=p.records.map(t=>({...t,content:this.contentOptions[t.content].label})),this.paginationProps.total=p.total}else Notification.error(d.data.message)})},pageSizeChange(l){if(l==="所有"){this.paginationProps.pageSize=this.paginationProps.total;return}this.paginationProps.pageSize=l,this.paginationProps.current=1,this.getPage()},pageChange(l){this.paginationProps.current=l,this.getPage()},commitCondition(){this.paginationProps.current=1,this.getPage()},clearCondition(){this.condition={content:null,tip:null,ringNumber:null,timeRange:null,author:null},this.getPage()}},mounted(){this.getPage()}},N={class:"button-group"};function k(l,n,d,p,t,u){const c=i("a-divider"),_=i("a-select"),r=i("a-form-item"),g=i("a-input"),b=i("a-range-picker"),f=i("a-grid"),m=i("a-button"),h=i("a-space"),P=i("a-form"),v=i("a-table");return z(),C(y,null,[e(c,{size:2,style:{"border-bottom-style":"dotted"},orientation:"left"},{default:o(()=>[s("设置条件")]),_:1}),e(P,{model:t.condition,"auto-label-width":"",style:{padding:"20px"}},{default:o(()=>[e(f,{cols:{xxl:4,lg:3,md:2,sm:1,xs:1},"col-gap":10},{default:o(()=>[e(r,{label:"类型"},{default:o(()=>[e(_,{modelValue:t.condition.content,"onUpdate:modelValue":n[0]||(n[0]=a=>t.condition.content=a),modelModifiers:{lazy:!0},options:t.contentOptions,placeholder:"类型","allow-clear":""},null,8,["modelValue","options"])]),_:1}),e(r,{label:"信息"},{default:o(()=>[e(g,{modelValue:t.condition.tip,"onUpdate:modelValue":n[1]||(n[1]=a=>t.condition.tip=a),modelModifiers:{lazy:!0},placeholder:"信息","allow-clear":""},null,8,["modelValue"])]),_:1}),e(r,{label:"足环"},{default:o(()=>[e(g,{modelValue:t.condition.ringNumber,"onUpdate:modelValue":n[2]||(n[2]=a=>t.condition.ringNumber=a),modelModifiers:{lazy:!0},placeholder:"足环","allow-clear":""},null,8,["modelValue"])]),_:1}),e(r,{label:"时间"},{default:o(()=>[e(b,{"allow-clear":"","show-time":"",modelValue:t.condition.timeRange,"onUpdate:modelValue":n[3]||(n[3]=a=>t.condition.timeRange=a),modelModifiers:{lazy:!0}},null,8,["modelValue"])]),_:1}),e(r,{label:"人员"},{default:o(()=>[e(g,{modelValue:t.condition.author,"onUpdate:modelValue":n[4]||(n[4]=a=>t.condition.author=a),modelModifiers:{lazy:!0},placeholder:"人员","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),w("div",N,[e(h,{wrap:""},{split:o(()=>[e(c,{direction:"vertical"})]),default:o(()=>[e(m,{type:"primary",onClick:n[5]||(n[5]=a=>u.commitCondition())},{default:o(()=>[s("提交查询条件")]),_:1}),e(m,{type:"primary",status:"warning",onClick:n[6]||(n[6]=a=>u.clearCondition())},{default:o(()=>[s("清空查询条件")]),_:1})]),_:1})])]),_:1},8,["model"]),e(c,{size:2,style:{"border-bottom-style":"dotted"},orientation:"left"},{default:o(()=>[s("日志数据")]),_:1}),e(v,{columns:t.columns,data:t.data,bordered:{cell:!0},pagination:t.paginationProps,onPageSizeChange:u.pageSizeChange,onPageChange:u.pageChange},null,8,["columns","data","pagination","onPageSizeChange","onPageChange"])],64)}const R=V(S,[["render",k],["__scopeId","data-v-addd7306"]]);export{R as default};
