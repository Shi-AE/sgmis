import{_ as N,d as p,F as O,N as m,r as n,o as h,c as V,f as a,t as r,b as F,H as C,C as u,q as U,D as k}from"./index-87c3fdd7.js";const w={data(){return{data:[],value:[],selected:[],form:{type:null,value:null},fieldOptions:[{label:"羽色",value:"yspz"},{label:"眼砂",value:"yanpz"},{label:"类型",value:"lxpz"},{label:"状态",value:"state"},{label:"级别",value:"jbpz"},{label:"医疗护理",value:"ylhl"}],options:{yspzOptions:[],yanpzOptions:[],lxpzOptions:[],stateOptions:[],jbpzOptions:[],ylhlOptions:[]},type:{yspz:{toName:"羽色",toField:"ys"},yanpz:{toName:"眼砂",toField:"yan"},lxpz:{toName:"类型",toField:"lx"},state:{toName:"状态",toField:"state"},jbpz:{toName:"级别",toField:"jb"},ylhl:{toName:"医疗护理",toField:"ylhl"}}}},mounted(){p({method:"GET",url:"pigeon",message:"正在获取鸽子信息"}).then(o=>{o.data.code===200&&(this.data=o.data.data.map(t=>({label:t.ringNumber,value:String(t.id)})))})},methods:{handleOptions(o){var t;this.form.value=null,((t=this.options[`${o}Options`])==null?void 0:t.length)===0&&p({method:"GET",url:`xxpz/${o}`,message:"正在获取系统信息"}).then(s=>{s.data.code===200&&(this.options[`${o}Options`]=s.data.data.map(i=>i.name))})},commit(){var i;const o=this.value,t=(i=this.type[this.form.type])==null?void 0:i.toField,s=this.form.value;O(()=>{if(o.length===0)return m.error("请选择至少一只鸽子"),!1;if(!t)return m.error("属性有误"),!1;if(!s)return m.error("属性设置值错误"),!1})&&p({method:"PUT",url:`pigeon/${t}/${s}`,data:o}).then(e=>{e.data.code===200?(m.success(e.data.message),this.value=[],this.selected=[],this.form={type:null,value:null}):m.error(e.data.message)})}}},j={class:"transfer"};function B(o,t,s,i,e,f){const c=n("a-divider"),b=n("a-transfer"),y=n("a-select"),_=n("a-form-item"),z=n("a-button"),g=n("a-form");return h(),V(C,null,[a(c,{size:2,style:{"border-bottom-style":"dotted"},orientation:"left"},{default:r(()=>[u("选择数据")]),_:1}),F("div",j,[a(b,{data:e.data,"onUpdate:data":t[0]||(t[0]=l=>e.data=l),"model-value":e.value,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value=l),selected:e.selected,"onUpdate:selected":t[2]||(t[2]=l=>e.selected=l),"one-way":"","show-search":"",title:["搜索鸽子信息","目标鸽子"]},null,8,["data","model-value","selected"])]),a(c,{size:2,style:{"border-bottom-style":"dotted"},orientation:"left"},{default:r(()=>[u("设置属性")]),_:1}),a(g,{model:e.form,"auto-label-width":!0,style:{margin:"auto",maxWidth:"600px"}},{default:r(()=>{var l,v;return[a(_,{label:"要进行设置的属性"},{default:r(()=>[a(y,{modelValue:e.form.type,"onUpdate:modelValue":t[3]||(t[3]=d=>e.form.type=d),modelModifiers:{lazy:!0},options:e.fieldOptions,placeholder:"属性",onChange:f.handleOptions},null,8,["modelValue","options","onChange"])]),_:1}),(l=e.type[e.form.type])!=null&&l.toName?(h(),U(_,{key:0,label:`要设置的${(v=e.type[e.form.type])==null?void 0:v.toName}值`},{default:r(()=>{var d;return[a(y,{modelValue:e.form.value,"onUpdate:modelValue":t[4]||(t[4]=x=>e.form.value=x),modelModifiers:{lazy:!0},options:e.options[`${e.form.type}Options`],placeholder:`选择${(d=e.type[e.form.type])==null?void 0:d.toName}`,"allow-search":""},null,8,["modelValue","options","placeholder"])]}),_:1},8,["label"])):k("",!0),a(z,{type:"primary",size:"large",onClick:t[5]||(t[5]=d=>f.commit())},{default:r(()=>[u("设置属性")]),_:1})]}),_:1},8,["model"])],64)}const E=N(w,[["render",B],["__scopeId","data-v-6af7ef1b"]]);export{E as default};
