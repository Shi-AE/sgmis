import{_ as m,F as f,d as u,o as p,c as w,b as s,w as n,v as l,e as _,p as h,a as P}from"./index-87c3fdd7.js";const v={data(){return{form:{oldPassword:"",newPassword:"",confirmPassword:""}}},methods:{submit(){f(()=>{let o=this.form.oldPassword,a=this.form.newPassword,d=this.form.confirmPassword;if(a.length<6)return this.$notification.error("新密码过短"),!1;if(a!==d)return this.$notification.error("确认密码失败"),!1;if(o===a)return this.$notification.error("密码未变更"),!1})&&u({method:"PUT",url:"/login",data:{account:this.$store.state.account,...this.form}}).then(o=>{this.form.oldPassword="",this.form.newPassword="",this.form.confirmPassword="",o.data.code===204?(this.$store.commit("setToken",""),this.$store.commit("setAccount",""),this.$router.push({name:"login"}),this.$notification.success("密码修改成功")):this.$notification.error(o.data.message)})}}},i=r=>(h("data-v-771eec19"),r=r(),P(),r),b={class:"full-screen d-flex align-items-center flex-column"},x=i(()=>s("div",{class:"title fs-1"},"修改密码",-1)),y={class:"form-floating mb-3"},g=i(()=>s("label",{for:"oldPassword"},"当前密码",-1)),$={class:"form-floating mb-3"},I=i(()=>s("label",{for:"newPassword"},"新密码（不少于6个字符）",-1)),S={class:"form-floating mb-3"},U=i(()=>s("label",{for:"confirmPassword"},"确认密码",-1)),V=i(()=>s("input",{type:"submit",class:"btn btn-primary",value:"确认修改密码"},null,-1));function k(r,o,a,d,t,c){return p(),w("div",b,[x,s("form",{class:"d-flex flex-column",onSubmit:o[3]||(o[3]=_((...e)=>c.submit&&c.submit(...e),["prevent"]))},[s("div",y,[n(s("input",{type:"password",class:"form-control",placeholder:"name@example.com","onUpdate:modelValue":o[0]||(o[0]=e=>t.form.oldPassword=e),required:""},null,512),[[l,t.form.oldPassword,void 0,{lazy:!0}]]),g]),s("div",$,[n(s("input",{type:"password",class:"form-control",placeholder:"name@example.com","onUpdate:modelValue":o[1]||(o[1]=e=>t.form.newPassword=e),required:""},null,512),[[l,t.form.newPassword,void 0,{lazy:!0}]]),I]),s("div",S,[n(s("input",{type:"password",class:"form-control",placeholder:"name@example.com","onUpdate:modelValue":o[2]||(o[2]=e=>t.form.confirmPassword=e),required:""},null,512),[[l,t.form.confirmPassword,void 0,{lazy:!0}]]),U]),V],32)])}const z=m(v,[["render",k],["__scopeId","data-v-771eec19"]]);export{z as default};
