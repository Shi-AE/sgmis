import{_ as k,K as L,A as P,d as b,N as f,s as v,r as n,o as p,c as y,f as o,t as l,C as _,b as r,q as M,m as q,D as R,n as B,p as E,a as O}from"./index-87c3fdd7.js";const w=`${window.location.protocol}//${window.location.hostname}/logo`,T={components:{IconPlus:L,IconEdit:P},data(){return{info:{name:"",shortName:"",phone:"",mail:"",logoUrl:"",address:""},file:{}}},methods:{submit(){b({method:"POST",url:"xtspz",data:this.info,message:"正在保存配置"}).then(s=>{s.data.code===200?f.success(s.data.message):f.error(s.data.message)})},onChange(s,t){this.file=t},customRequest(s){const{onProgress:t,onError:g,onSuccess:z,fileItem:e,name:m}=s,u=new FormData;u.append(m||"file",e.file),b({method:"POST",url:"xtspz/logo",data:u,message:"正在上传图片",onUploadProgress:a=>{const h=a.loaded/a.total;t(h,a)}}).then(a=>{a.data.code===200?(z(a),f.success(a.data.message),this.info.logoUrl=a.data.data,v.commit("setLogoName",a.data.data)):(g(a),this.resetLogo(this),f.error(a.data.message))}).catch(a=>{g(a),this.resetLogo(this),f.error("服务器发生错误，上传超时")})},resetLogo(){this.$store.state.logoName.length>0?this.file={url:`${w}/${this.$store.state.logoName}`,name:this.$store.state.logoName}:this.file={}}},mounted(){b({method:"GET",url:"xtspz",message:"正在获取用户信息"}).then(s=>{if(s.data.code===200){const t=s.data.data;t.logoUrl!==null?(v.commit("setLogoName",t.logoUrl),this.file={url:`${w}/${this.$store.state.logoName}`,name:this.$store.state.logoName}):this.file={},this.info=t}})}},V=s=>(E("data-v-499fb64e"),s=s(),O(),s),D={class:"full-screen d-flex align-items-center flex-column"},F=V(()=>r("div",{class:"title fs-1"},"血统书配置",-1)),G=V(()=>r("div",null,"LOGO",-1)),j={key:0,class:"arco-upload-list-picture custom-upload-avatar"},A=["src"],K={class:"arco-upload-list-picture-mask"},X={key:1,class:"arco-upload-picture-card"},Y={class:"arco-upload-picture-card-text"},H=V(()=>r("div",{style:{"margin-top":"10px","font-weight":"600"}},"上传logo",-1));function J(s,t,g,z,e,m){const u=n("a-divider"),a=n("IconEdit"),h=n("a-progress"),I=n("IconPlus"),U=n("a-upload"),x=n("a-space"),d=n("a-form-item"),c=n("a-input"),C=n("a-textarea"),N=n("a-button"),S=n("a-form");return p(),y("div",D,[F,o(u,{size:2,style:{"border-bottom-style":"dotted"},orientation:"left"},{default:l(()=>[_("信息")]),_:1}),o(S,{ref:"formRef",model:e.info,onSubmit:m.submit,size:"large",layout:"horizontal","auto-label-width":!0},{default:l(()=>[o(d,null,{default:l(()=>[o(x,{size:"large"},{default:l(()=>[G,o(U,{action:"/xtspz/logo",fileList:e.file?[e.file]:[],"show-file-list":!1,onChange:m.onChange,"custom-request":m.customRequest,accept:"image/jpeg, image/png, image/gif, image/tiff"},{"upload-button":l(()=>[r("div",{class:B(`arco-upload-list-item${e.file&&e.file.status==="error"?" arco-upload-list-item-error":""}`)},[e.file&&e.file.url?(p(),y("div",j,[r("img",{src:e.file.url,alt:""},null,8,A),r("div",K,[o(a)]),e.file.status==="uploading"&&e.file.percent<100?(p(),M(h,{key:0,percent:e.file.percent,type:"circle",size:"mini",style:q({position:"absolute",left:"50%",top:"50%",transform:"translateX(-50%) translateY(-50%)"})},null,8,["percent","style"])):R("",!0)])):(p(),y("div",X,[r("div",Y,[o(I),H])]))],2)]),_:1},8,["fileList","onChange","custom-request"])]),_:1})]),_:1}),o(d,{field:"name",tooltip:"你的鸽舍名称",label:"鸽舍名称"},{default:l(()=>[o(c,{modelValue:e.info.name,"onUpdate:modelValue":t[0]||(t[0]=i=>e.info.name=i),modelModifiers:{lazy:!0},placeholder:"位于联系方式上方"},null,8,["modelValue"])]),_:1}),o(d,{field:"shortName",tooltip:"给鸽舍一个简称吧",label:"鸽舍简称"},{default:l(()=>[o(c,{modelValue:e.info.shortName,"onUpdate:modelValue":t[1]||(t[1]=i=>e.info.shortName=i),modelModifiers:{lazy:!0},placeholder:"位于logo旁边"},null,8,["modelValue"])]),_:1}),o(d,{field:"phone",tooltip:"让别人能够通过移动设备联系你",label:"联系电话"},{default:l(()=>[o(c,{modelValue:e.info.phone,"onUpdate:modelValue":t[2]||(t[2]=i=>e.info.phone=i),modelModifiers:{lazy:!0},placeholder:"例如：13888888888"},null,8,["modelValue"])]),_:1}),o(d,{field:"mail",tooltip:"让别人能够通过移动邮箱联系你",label:"联系邮箱"},{default:l(()=>[o(c,{modelValue:e.info.mail,"onUpdate:modelValue":t[3]||(t[3]=i=>e.info.mail=i),modelModifiers:{lazy:!0},placeholder:"例如：aaa@163.com"},null,8,["modelValue"])]),_:1}),o(d,{field:"url",tooltip:"让别人能够通过移动网站发现你",label:"鸽舍网址"},{default:l(()=>[o(c,{modelValue:e.info.url,"onUpdate:modelValue":t[4]||(t[4]=i=>e.info.url=i),modelModifiers:{lazy:!0},placeholder:"例如：www.sgmis.com"},null,8,["modelValue"])]),_:1}),o(d,{field:"address",tooltip:"具体地址",label:"地址"},{default:l(()=>[o(C,{modelValue:e.info.address,"onUpdate:modelValue":t[5]||(t[5]=i=>e.info.address=i),modelModifiers:{lazy:!0},placeholder:"鸽舍地址"},null,8,["modelValue"])]),_:1}),o(u,{size:2,style:{"border-bottom-style":"dotted"},orientation:"left"},{default:l(()=>[_("操作")]),_:1}),o(d,null,{default:l(()=>[o(x,null,{default:l(()=>[o(N,{type:"primary","html-type":"submit"},{default:l(()=>[_("保存")]),_:1}),o(N,{onClick:t[6]||(t[6]=i=>s.$refs.formRef.resetFields())},{default:l(()=>[_("重置")]),_:1})]),_:1})]),_:1})]),_:1},8,["model","onSubmit"])])}const W=k(T,[["render",J],["__scopeId","data-v-499fb64e"]]);export{W as default};
