import{h as L,i as K,j as V,k as R,l as A,o as B,c as U,n as q,m as W,b as m,_ as te,G as k,d as C,N as f,F as j,M as G,r as v,f as l,t as o,H as le,J as oe,z as x,C as u,q as ie,D as ae,E as N,p as ne,a as se}from"./index-87c3fdd7.js";import{I as re}from"./index-ef97a484.js";const de=L({name:"IconMan",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:t=>["butt","round","square"].includes(t)},strokeLinejoin:{type:String,default:"miter",validator:t=>["arcs","bevel","miter","miter-clip","round"].includes(t)},rotate:Number,spin:Boolean},emits:{click:t=>!0},setup(t,{emit:e}){const n=K("icon"),d=V(()=>[n,`${n}-man`,{[`${n}-spin`]:t.spin}]),a=V(()=>{const c={};return t.size&&(c.fontSize=A(t.size)?`${t.size}px`:t.size),t.rotate&&(c.transform=`rotate(${t.rotate}deg)`),c});return{cls:d,innerStyle:a,onClick:c=>{e("click",c)}}}}),ue=["stroke-width","stroke-linecap","stroke-linejoin"],ce=m("path",{d:"M40 8 29.68 18.321M31 8h9v9m-7 10c0 7.18-5.82 13-13 13S7 34.18 7 27s5.82-13 13-13 13 5.82 13 13Z"},null,-1),me=[ce];function fe(t,e,n,d,a,r){return B(),U("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:q(t.cls),style:W(t.innerStyle),"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin,onClick:e[0]||(e[0]=(...c)=>t.onClick&&t.onClick(...c))},me,14,ue)}var P=R(de,[["render",fe]]);const pe=Object.assign(P,{install:(t,e)=>{var n;const d=(n=e==null?void 0:e.iconPrefix)!=null?n:"";t.component(d+P.name,P)}}),he=L({name:"IconWoman",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:t=>["butt","round","square"].includes(t)},strokeLinejoin:{type:String,default:"miter",validator:t=>["arcs","bevel","miter","miter-clip","round"].includes(t)},rotate:Number,spin:Boolean},emits:{click:t=>!0},setup(t,{emit:e}){const n=K("icon"),d=V(()=>[n,`${n}-woman`,{[`${n}-spin`]:t.spin}]),a=V(()=>{const c={};return t.size&&(c.fontSize=A(t.size)?`${t.size}px`:t.size),t.rotate&&(c.transform=`rotate(${t.rotate}deg)`),c});return{cls:d,innerStyle:a,onClick:c=>{e("click",c)}}}}),ge=["stroke-width","stroke-linecap","stroke-linejoin"],be=m("path",{d:"M24 29c6.075 0 11-4.925 11-11S30.075 7 24 7s-11 4.925-11 11 4.925 11 11 11Zm0 0v15M15 36h18"},null,-1),ye=[be];function ve(t,e,n,d,a,r){return B(),U("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:q(t.cls),style:W(t.innerStyle),"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin,onClick:e[0]||(e[0]=(...c)=>t.onClick&&t.onClick(...c))},ye,14,ge)}var D=R(he,[["render",ve]]);const _e=Object.assign(D,{install:(t,e)=>{var n;const d=(n=e==null?void 0:e.iconPrefix)!=null?n:"";t.component(d+D.name,D)}});const ke={mounted(){this.updateAllData()},components:{IconRefresh:re,IconWoman:_e,IconMan:pe},data(){return{pigeonResourcePath:`${window.location.protocol}//${window.location.hostname}/pigeon`,columns:[{title:"序号",dataIndex:"key",align:"center",width:90,sortable:{sortDirections:["descend"]}},{title:"操作",slotName:"front-operation",align:"center",width:165},{title:"更新日期",dataIndex:"updateData",align:"center",ellipsis:!0,tooltip:!0,width:140,sortable:{sortDirections:["ascend","descend"]},filterable:{filter:(t,e)=>{if(!e.updateData)return!1;const n=new Date(`${e.updateData} 00:00:00`);return t[0][0]<=n&&n<=t[0][1]},slotName:"updateData-filter",icon:()=>k(oe)}},{title:"鸽棚/巢箱",dataIndex:"gpcx",align:"center",ellipsis:!0,tooltip:!0,width:120,filterable:{filter:(t,e)=>{var n;return(n=e.gpcx)==null?void 0:n.includes(t)},slotName:"gpcx-filter",icon:()=>k(x),defaultFilteredValue:this.$route.params.name?[this.$route.params.name]:null}},{title:"图片",slotName:"picture",align:"center",width:70},{title:"足环",slotName:"ringNumber",align:"center",width:200,filterable:{filter:(t,e)=>{var n,d,a;return((n=e.ringNumber)==null?void 0:n.includes(t))||((d=e.name)==null?void 0:d.includes(t))||((a=e.bloodline)==null?void 0:a.includes(t))},slotName:"ringNumber-filter",icon:()=>k(x)}},{title:"性别",dataIndex:"sex",align:"center",width:50},{title:"父鸽足环",slotName:"fatherRingNumber",align:"center",width:200,titleSlotName:"father",filterable:{filter:(t,e)=>{var n,d,a,r,c,s;return((d=(n=e.father)==null?void 0:n.ringNumber)==null?void 0:d.includes(t))||((r=(a=e.father)==null?void 0:a.name)==null?void 0:r.includes(t))||((s=(c=e.father)==null?void 0:c.bloodline)==null?void 0:s.includes(t))},slotName:"fatherRingNumber-filter",icon:()=>k(x)}},{title:"母鸽足环",slotName:"motherRingNumber",align:"center",width:200,titleSlotName:"mother",filterable:{filter:(t,e)=>{var n,d,a,r,c,s;return((d=(n=e.mather)==null?void 0:n.ringNumber)==null?void 0:d.includes(t))||((r=(a=e.mather)==null?void 0:a.name)==null?void 0:r.includes(t))||((s=(c=e.mather)==null?void 0:c.bloodline)==null?void 0:s.includes(t))},slotName:"motherRingNumber-filter",icon:()=>k(x)}},{title:"眼砂",dataIndex:"yan",align:"center",ellipsis:!0,tooltip:!0,width:80,filterable:{filter:(t,e)=>{var n;return(n=e.yan)==null?void 0:n.includes(t)},slotName:"yan-filter",icon:()=>k(x)}},{title:"羽色",dataIndex:"ys",align:"center",ellipsis:!0,tooltip:!0,width:80,filterable:{filter:(t,e)=>{var n;return(n=e.ys)==null?void 0:n.includes(t)},slotName:"ys-filter",icon:()=>k(x)}},{title:"类型",dataIndex:"lx",align:"center",ellipsis:!0,tooltip:!0,width:80,filterable:{filter:(t,e)=>{var n;return(n=e.lx)==null?void 0:n.includes(t)},slotName:"lx-filter",icon:()=>k(x)}},{title:"状态",dataIndex:"state",align:"center",ellipsis:!0,tooltip:!0,width:80,filterable:{filter:(t,e)=>{var n;return(n=e.state)==null?void 0:n.includes(t)},slotName:"state-filter",icon:()=>k(x)}},{title:"级别",dataIndex:"jb",align:"center",ellipsis:!0,tooltip:!0,width:80,filterable:{filter:(t,e)=>{var n;return(n=e.jb)==null?void 0:n.includes(t)},slotName:"jb-filter",icon:()=>k(x)}},{title:"赛绩鸽",dataIndex:"isGrade",align:"center",ellipsis:!0,tooltip:!0,width:80},{title:"备注",dataIndex:"remark",align:"center",ellipsis:!0,tooltip:!0,width:100,filterable:{filter:(t,e)=>{var n;return(n=e.remark)==null?void 0:n.includes(t)},slotName:"remark-filter",icon:()=>k(x)}},{title:"操作",slotName:"end-operation",align:"center",width:190}],type:{yspz:{toName:"羽色",toField:"ys"},yanpz:{toName:"眼砂",toField:"yan"},lxpz:{toName:"类型",toField:"lx"},state:{toName:"状态",toField:"state"},jbpz:{toName:"级别",toField:"jb"},ylhl:{toName:"医疗护理",toField:"ylhl"}},data:null,paginationProps:{total:0,current:1,pageSize:10,showPageSize:!0,pageSizeOptions:[5,10,20,30,40,50,"所有"],showJumper:!0,showTotal:!0},editModal:{visible:!1,title:"查看",disabled:!1},options:{countryOptions:[],provinceOptions:[],yspzOptions:[],yanpzOptions:[],lxpzOptions:[],stateOptions:[],jbpzOptions:[],ylhlOptions:[]},form:{id:null,country:null,year:null,province:null,code:null,bloodline:null,yan:null,ys:null,lx:null,state:null,jb:null,isGrade:null,remark:null,gid:null},selectedKeys:null,batchEditModal:{visible:!1,title:"",label:"",field:"",options:[],data:null},batchShareModal:{visible:!1,options:[],gid:null},batchGpcxModal:{visible:!1,options:[],id:null},fileModal:{visible:!1},batchLogModal:{visible:!1,log:null}}},methods:{updateAllData(){const t={};C({method:"GET",url:"pigeon",message:"正在获取鸽子信息"}).then(e=>{e.data.code===200&&(this.data=e.data.data.map((n,d)=>(t[n.id]={ringNumber:n.ringNumber,bloodline:n.bloodline,name:n.name},{...n,key:d+1,pictureUrl:n.pictureUrl??null})),this.data.forEach(n=>{n.father=t[n.fid]??null,n.mather=t[n.mid]??null}),this.paginationProps.total=this.getTotal())})},updateCurrentPageData(){const t={},e={current:this.paginationProps.current,pageSize:this.paginationProps.pageSize};C({method:"PATCH",url:"pigeon",data:e,message:"正在获取更新后的数据"}).then(n=>{if(n.data.code===200){const d=(e.current-1)*e.pageSize,a=e.pageSize,r=Math.min(d+a,this.data.length),c=n.data.data.map((s,b)=>({...s,key:d+b+1,pictureUrl:s.pictureUrl??null}));this.data.splice((e.current-1)*e.pageSize,e.pageSize,...c),this.data.forEach(s=>{t[s.id]={ringNumber:s.ringNumber,bloodline:s.bloodline,name:s.name}});for(let s=d;s<r;s++)this.data[s].father=t[this.data[s].fid]??null,this.data[s].mather=t[this.data[s].mid]??null}else f.error(n.data.message)})},updateSingleData(t){const e=this.data[t].id;C({method:"GET",url:`pigeon/base/${e}`,message:"正在获取更新信息"}).then(n=>{if(n.data.code===200){const d=n.data.data,a=this.data.find(c=>JSON.stringify(c.id)===JSON.stringify(d.fid)),r=this.data.find(c=>JSON.stringify(c.id)===JSON.stringify(d.mid));this.data[t]={...d,key:t+1,pictureUrl:d.pictureUrl??null,father:{ringNumber:a==null?void 0:a.ringNumber,bloodline:a==null?void 0:a.bloodline,name:a==null?void 0:a.name},mather:{ringNumber:r==null?void 0:r.ringNumber,bloodline:r==null?void 0:r.bloodline,name:r==null?void 0:r.name}}}})},toEditPigeon(){this.$router.push({name:"editPigeon"})},toRapid(){this.$router.push({name:"rapid"})},toBatch(){this.$router.push({name:"batch"})},toLog(){this.$router.push({name:"log"})},toEditPigeonById(t){this.$router.push({name:"editPigeon",params:{id:t.id}})},openFileModal(){this.fileModal.visible=!0},pageSizeChange(t){if(t==="所有"){this.paginationProps.pageSize=this.getTotal();return}this.paginationProps.pageSize=t},pageChange(t){this.paginationProps.current=t},getTotal(){return this.data?this.data.length:0},resetTable(){this.$refs.table.clearSorters(),this.$refs.table.clearFilters(),f.success("已清空筛选")},handleCancel(){this.$store.state.isPending?f.error("请求已发送，取消失败"):f.info("已取消"),this.resetForm()},handleEditCancel(){this.editModal.disabled||(this.$store.state.isPending?f.error("请求已发送，取消失败"):f.info("已取消")),this.resetForm()},handleBeforeOpen(){let t=!0;for(let e in this.options)if(this.options[e].length===0){t=!1;break}t||C({method:"GET",url:"xxpz"}).then(e=>{e.data.code===200&&e.data.data.forEach(n=>{if(this.options[`${n.type}Options`]){const d=n.name.split("/");this.options[`${n.type}Options`].push({label:d[1]?d[0]+d[1]:d[0],value:d[1]?d[1]:d[0]})}})})},async handleEditPigeon(){const t=this.form;if(!j(()=>{if(!t.country||!t.year||!t.province||!t.code)return f.error("必填信息为空"),!1},"正在验证数据"))return!1;if(!this.editModal.disabled)return await C({method:"PUT",url:"pigeon",data:this.formToData(this.form),message:"正在更新鸽子信息"}).then(e=>{e.data.code===200?(this.updateSingleData(this.form.key-1),f.success(e.data.message)):f.error(e.data.message)}),this.resetForm(),!0},resetForm(){this.form={id:null,country:null,year:null,province:null,code:null,bloodline:null,yan:null,ys:null,lx:null,state:null,jb:null,isGrade:null,remark:null,gid:null}},dataToForm(t){var n;const e=(n=t==null?void 0:t.ringNumber)==null?void 0:n.split("-");return{country:e?e[0]:null,year:e?e[1]:null,province:e?e[2]:null,code:e?e[3]:null,...t}},formToData(t){return{...t,ringNumber:[t.country,t.year,t.province,t.code].join("-")}},handleCheckModalOpen(t){this.form=this.dataToForm(t),this.editModal={visible:!0,title:"查看鸽子信息",disabled:!0}},handleEditModalOpen(t){this.form=this.dataToForm(t),this.editModal={visible:!0,title:"编辑鸽子信息",disabled:!1}},async handleEditBatch(){if(this.batchEditModal.data===null)return f.warning("请选择数据"),!1;if(this.batchEditModal.field==="ylhl")return f.success("修改成功"),!0;const t=this.selectedKeys.map(e=>this.data[e-1].id);return j(()=>{if(!this.batchEditModal.data)return f.error("属性设置值错误"),!1})?(await C({method:"PUT",url:`pigeon/${this.batchEditModal.field}/${this.batchEditModal.data}`,data:t}).then(e=>{e.data.code===200?(this.updateCurrentPageData(),f.success(e.data.message)):f.error(e.data.message)}),this.selectedKeys=[],!0):!1},notSelectedKeys(){var t;return(t=this.selectedKeys)!=null&&t.length?!1:(f.warning("还未选择数据"),!0)},async handleBatchEditModalOpen(t){var e;this.notSelectedKeys()||(((e=this.options[`${t}Options`])==null?void 0:e.length)===0&&await C({method:"GET",url:`xxpz/${t}`,message:"正在获取系统信息"}).then(n=>{n.data.code===200&&(this.options[`${t}Options`]=n.data.data.map(d=>d.name))}),this.batchEditModal={visible:!0,title:`批量编辑${this.type[t].toName}`,label:this.type[t].toName,field:this.type[t].toField,options:this.options[`${t}Options`],data:null})},handleDeleteModalOpen(t){const e=G.warning({title:"删除鸽子",content:()=>[k("div",`确认要删除鸽子${t.ringNumber}吗？`),k("div","这可能会影响到子代关系")],closable:!0,hideCancel:!1,onCancel:()=>{this.$store.state.isPending?f.error("请求已发送，取消失败"):f.info("已取消")},onBeforeOk:()=>{C({method:"DELETE",url:`pigeon/${t.id}/${t.sex}`,message:"正在删除"}).then(n=>{n.data.code===200?(this.updateAllData(),f.success(n.data.message),e.close()):(f.error(n.data.message),e.close())})}});this.selectedKeys=[]},handleBatchLogModalOpen(){this.notSelectedKeys()||(this.batchLogModal.visible=!0,this.batchLogModal.log=null)},async handleLogBatch(){const t=this.batchLogModal.log;if(t==null||t.length===0)return f.warning("请填写日志内容"),!1;const e=this.selectedKeys.map(n=>{const d=this.data[n-1];return{pid:d.id,ringNumber:d.ringNumber,tip:t}});return await C({method:"PUT",url:"oplog",data:e,message:"正在添加日志"}).then(n=>n.data.code===200?(f.success(n.data.message),!0):(f.error(n.data.message),!1))},handleBatchShareModalOpen(){this.notSelectedKeys()||C({method:"GET",url:"user/admin",message:"正在获取管理员信息"}).then(t=>{t.data.code===200?(this.batchShareModal.visible=!0,this.batchShareModal.gid=null,this.batchShareModal.options=t.data.data.map(e=>({value:String(e.gid),label:e.account}))):f.error(t.data.message)})},async handleShareBatch(){if(this.batchShareModal.gid===null)return f.warning("请选择管理员账号名称"),!1;const t=this.selectedKeys.map(e=>this.data[e-1].id);return await C({method:"POST",url:`pigeon/share/${this.batchShareModal.gid}`,data:t,message:"正在分享血统"}).then(e=>{e.data.code===200?f.success(e.data.message):f.error(e.data.message+",对方已拥有该血统")}),this.selectedKeys=[],!0},handleBatchGpcxModalOpen(){this.notSelectedKeys()||C({method:"GET",url:"gpcx/base",message:"正在获取鸽棚巢箱信息"}).then(t=>{if(t.data.code===200){const e=t.data.data.map(n=>({value:String(n.id),label:n.name}));this.batchGpcxModal={visible:!0,options:e,id:null}}})},async handleGpcxBatch(){if(this.batchGpcxModal.id===null)return f.warning("请选鸽棚巢箱名称"),!1;const t=this.selectedKeys.map(e=>this.data[e-1].id);return await C({method:"POST",url:`gpcx/${this.batchGpcxModal.id}`,data:t,message:"正在将鸽子添加到鸽棚巢箱"}).then(e=>{e.data.code===200?(this.updateCurrentPageData(),f.success(e.data.message)):f.error(e.data.message)}),this.selectedKeys=[],!0},handleBatchDeleteModalOpen(){if(this.notSelectedKeys())return;const t=this.selectedKeys.map(n=>{const d=this.data[n-1];return{id:d==null?void 0:d.id,sex:d==null?void 0:d.sex}}),e=G.warning({title:"批量删除鸽子",content:()=>[k("div","确认要批量删除选中的鸽子吗？"),k("div","这可能会影响到子代关系")],closable:!0,hideCancel:!1,onCancel:()=>{this.$store.state.isPending?f.error("请求已发送，取消失败"):f.info("已取消")},onBeforeOk:()=>{C({method:"DELETE",headers:{"X-HTTP-Method-Override":"POST"},url:"pigeon",data:t,message:"正在删除"}).then(n=>{n.data.code===200?(this.updateAllData(),f.success(n.data.message),this.selectedKeys=[],e.close()):(f.error(n.data.message),e.close())})}})},handleFileUpload(t){const{onProgress:e,onError:n,onSuccess:d,fileItem:a,name:r}=t,c=new FormData;c.append(r||"file",a.file),C({method:"POST",url:"pigeon/file",data:c,message:"正在上传并解析文件",onUploadProgress:s=>{const b=s.loaded/s.total;e(b,s)}}).then(s=>{s.data.code===200?(d(s),this.updateAllData(),f.success(s.data.message),this.fileModal.visible=!1):(n(s),f.error(s.data.message))}).catch(s=>{n(s),f.error("服务器发生错误，上传超时")})}}},Ce=t=>(ne("data-v-0a454b50"),t=t(),se(),t),Me={class:"button-group"},we={class:"button-group"},xe={class:"button-group"},Ne={class:"custom-filter"},Se={class:"custom-filter-footer"},ze={class:"custom-filter"},Oe={class:"custom-filter-footer"},Ve={class:"custom-filter"},Be={class:"custom-filter-footer"},Ee={class:"custom-filter"},Ie={class:"custom-filter-footer"},Pe={class:"custom-filter"},De={class:"custom-filter-footer"},Ue={class:"custom-filter"},Te={class:"custom-filter-footer"},Fe={class:"custom-filter"},je={class:"custom-filter-footer"},Ge={class:"custom-filter"},Le={class:"custom-filter-footer"},Ke={class:"custom-filter"},Re={class:"custom-filter-footer"},Ae={class:"custom-filter"},qe={class:"custom-filter-footer"},We={class:"custom-filter"},Je={class:"custom-filter-footer"},He=Ce(()=>m("div",null,"共享后对方数据中不保留父代信息",-1));function Ze(t,e,n,d,a,r){const c=v("a-divider"),s=v("a-button"),b=v("a-space"),J=v("IconRefresh"),T=v("a-row"),H=v("IconMan"),Z=v("IconWoman"),X=v("a-image"),E=v("a-tooltip"),I=v("routerLink"),Q=v("a-range-picker"),M=v("a-input"),Y=v("a-table"),w=v("a-select"),_=v("a-form-item"),O=v("a-col"),$=v("a-year-picker"),F=v("a-textarea"),z=v("a-form"),S=v("a-modal"),ee=v("a-upload");return B(),U(le,null,[l(c,{size:2,style:{"border-bottom-style":"dotted"},orientation:"left"},{default:o(()=>[u("批量操作")]),_:1}),m("div",Me,[l(b,{wrap:""},{split:o(()=>[l(c,{direction:"vertical"})]),default:o(()=>[l(s,{type:"primary",status:"normal",onClick:e[0]||(e[0]=i=>r.handleBatchEditModalOpen("yspz"))},{default:o(()=>[u("设置羽色")]),_:1}),l(s,{type:"primary",status:"normal",onClick:e[1]||(e[1]=i=>r.handleBatchEditModalOpen("yanpz"))},{default:o(()=>[u("设置眼砂")]),_:1}),l(s,{type:"primary",status:"normal",onClick:e[2]||(e[2]=i=>r.handleBatchEditModalOpen("lxpz"))},{default:o(()=>[u("设置类型")]),_:1}),l(s,{type:"primary",status:"normal",onClick:e[3]||(e[3]=i=>r.handleBatchEditModalOpen("state"))},{default:o(()=>[u("设置状态")]),_:1}),l(s,{type:"primary",status:"normal",onClick:e[4]||(e[4]=i=>r.handleBatchEditModalOpen("jbpz"))},{default:o(()=>[u("设置级别")]),_:1}),l(s,{type:"primary",status:"normal",onClick:e[5]||(e[5]=i=>r.handleBatchEditModalOpen("ylhl"))},{default:o(()=>[u("医疗护理")]),_:1}),l(s,{type:"primary",status:"warning",onClick:e[6]||(e[6]=i=>r.handleBatchLogModalOpen())},{default:o(()=>[u("填写日志")]),_:1}),l(s,{disabled:!t.$store.state.admin,type:"primary",status:"warning",onClick:e[7]||(e[7]=i=>r.handleBatchShareModalOpen())},{default:o(()=>[u(" 共享血统 ")]),_:1},8,["disabled"]),l(s,{type:"primary",status:"success",onClick:e[8]||(e[8]=i=>r.handleBatchGpcxModalOpen())},{default:o(()=>[u("加入鸽棚巢箱")]),_:1}),l(s,{type:"primary",status:"danger",onClick:e[9]||(e[9]=i=>r.handleBatchDeleteModalOpen())},{default:o(()=>[u("批量删除")]),_:1})]),_:1})]),l(c,{size:2,style:{"border-bottom-style":"dotted"},orientation:"left"},{default:o(()=>[u("新增操作")]),_:1}),m("div",we,[l(b,{wrap:""},{split:o(()=>[l(c,{direction:"vertical"})]),default:o(()=>[l(s,{type:"primary",status:"success",onClick:e[10]||(e[10]=i=>r.toEditPigeon())},{default:o(()=>[u("新增鸽子")]),_:1}),l(s,{type:"primary",status:"success",onClick:e[11]||(e[11]=i=>r.toRapid())},{default:o(()=>[u("鸽子快速入库")]),_:1}),l(s,{type:"primary",status:"success",onClick:e[12]||(e[12]=i=>r.openFileModal())},{default:o(()=>[u("文件批量导入")]),_:1})]),_:1})]),l(c,{size:2,style:{"border-bottom-style":"dotted"},orientation:"left"},{default:o(()=>[u("其它操作")]),_:1}),m("div",xe,[l(T,{justify:"space-between"},{default:o(()=>[l(b,{wrap:""},{split:o(()=>[l(c,{direction:"vertical"})]),default:o(()=>[l(s,{type:"primary",status:"warning",onClick:e[13]||(e[13]=i=>r.toBatch())},{default:o(()=>[u("高级批量操作")]),_:1}),l(s,{type:"primary",status:"warning",onClick:e[14]||(e[14]=i=>r.toLog())},{default:o(()=>[u("查看操作记录")]),_:1}),l(s,{type:"primary",status:"danger"},{default:o(()=>[u("打印血统")]),_:1}),l(s,{type:"primary",status:"danger"},{default:o(()=>[u("导出血统书展示链接")]),_:1})]),_:1}),l(b,null,{default:o(()=>[l(s,{type:"primary",status:"success",onClick:e[15]||(e[15]=i=>r.resetTable())},{default:o(()=>[l(J,{style:{color:"#ffffff"}}),u(" 清空筛选 ")]),_:1})]),_:1})]),_:1})]),l(c,{size:2,style:{"border-bottom-style":"dotted"},orientation:"left"},{default:o(()=>[u("鸽子信息")]),_:1}),l(Y,{ref:"table",columns:a.columns,data:a.data,"sticky-header":!0,"column-resizable":!0,bordered:{cell:!0},"row-selection":{type:"checkbox",showCheckedAll:!0,onlyCurrent:!0},selectedKeys:a.selectedKeys,"onUpdate:selectedKeys":e[16]||(e[16]=i=>a.selectedKeys=i),pagination:a.paginationProps,onPageSizeChange:r.pageSizeChange,onPageChange:r.pageChange},{father:o(()=>[l(H),u(" 父足环 ")]),mother:o(()=>[l(Z),u(" 母足环 ")]),"front-operation":o(({record:i})=>[l(b,{wrap:""},{default:o(()=>[l(s,{type:"outline",status:"success",onClick:p=>r.handleCheckModalOpen(i)},{default:o(()=>[u(" 查看 ")]),_:2},1032,["onClick"]),l(s,{type:"outline",status:"normal",onClick:p=>r.handleEditModalOpen(i)},{default:o(()=>[u(" 编辑 ")]),_:2},1032,["onClick"])]),_:2},1024)]),"end-operation":o(({record:i})=>[l(b,{wrap:""},{default:o(()=>[l(s,{type:"outline",status:"warning",onClick:p=>r.toEditPigeonById(i)},{default:o(()=>[u(" 编辑血统 ")]),_:2},1032,["onClick"]),l(s,{type:"outline",status:"danger",onClick:p=>r.handleDeleteModalOpen(i)},{default:o(()=>[u(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),picture:o(({record:i})=>[i.pictureUrl?(B(),ie(X,{key:0,src:`${a.pigeonResourcePath}/${i.pictureUrl}`,width:"100%",height:"100%",fit:"cover"},null,8,["src"])):ae("",!0)]),ringNumber:o(({record:i})=>[l(I,{to:{name:"detail",params:{id:i.id}},style:{color:"#D91AD9"}},{default:o(()=>[l(E,{content:"点击查看鸽子详情",mini:!0,"background-color":"#FDC2DB"},{default:o(()=>[m("div",null,N(i.ringNumber),1)]),_:2},1024)]),_:2},1032,["to"]),m("div",null,N(i.name),1),m("div",null,N(i.bloodline),1)]),fatherRingNumber:o(({record:i})=>{var p,h;return[l(I,{to:{name:"detail",params:{id:i.fid}},style:{color:"#D91AD9"}},{default:o(()=>[l(E,{content:"点击查看鸽子详情",mini:!0,"background-color":"#F7BAEF"},{default:o(()=>{var g;return[m("div",null,N((g=i.father)==null?void 0:g.ringNumber),1)]}),_:2},1024)]),_:2},1032,["to"]),m("div",null,N((p=i.father)==null?void 0:p.name),1),m("div",null,N((h=i.father)==null?void 0:h.bloodline),1)]}),motherRingNumber:o(({record:i})=>{var p,h;return[l(I,{to:{name:"detail",params:{id:i.mid}},style:{color:"#D91AD9"}},{default:o(()=>[l(E,{content:"点击查看鸽子详情",mini:!0,"background-color":"#DDBEF6"},{default:o(()=>{var g;return[m("div",null,N((g=i.mather)==null?void 0:g.ringNumber),1)]}),_:2},1024)]),_:2},1032,["to"]),m("div",null,N((p=i.mather)==null?void 0:p.name),1),m("div",null,N((h=i.mather)==null?void 0:h.bloodline),1)]}),"updateData-filter":o(({filterValue:i,setFilterValue:p,handleFilterConfirm:h,handleFilterReset:g})=>[m("div",Ne,[l(b,{direction:"vertical"},{default:o(()=>[l(Q,{"value-format":"Date",modelValue:i[0],"onUpdate:modelValue":y=>i[0]=y},null,8,["modelValue","onUpdate:modelValue"]),m("div",Se,[l(s,{onClick:h},{default:o(()=>[u("搜索")]),_:2},1032,["onClick"]),l(s,{onClick:g},{default:o(()=>[u("重置")]),_:2},1032,["onClick"])])]),_:2},1024)])]),"gpcx-filter":o(({filterValue:i,setFilterValue:p,handleFilterConfirm:h,handleFilterReset:g})=>[m("div",ze,[l(b,{direction:"vertical"},{default:o(()=>[l(M,{"model-value":i[0],onInput:y=>p([y])},null,8,["model-value","onInput"]),m("div",Oe,[l(s,{onClick:h},{default:o(()=>[u("搜索")]),_:2},1032,["onClick"]),l(s,{onClick:g},{default:o(()=>[u("重置")]),_:2},1032,["onClick"])])]),_:2},1024)])]),"ringNumber-filter":o(({filterValue:i,setFilterValue:p,handleFilterConfirm:h,handleFilterReset:g})=>[m("div",Ve,[l(b,{direction:"vertical"},{default:o(()=>[l(M,{"model-value":i[0],onInput:y=>p([y])},null,8,["model-value","onInput"]),m("div",Be,[l(s,{onClick:h},{default:o(()=>[u("搜索")]),_:2},1032,["onClick"]),l(s,{onClick:g},{default:o(()=>[u("重置")]),_:2},1032,["onClick"])])]),_:2},1024)])]),"fatherRingNumber-filter":o(({filterValue:i,setFilterValue:p,handleFilterConfirm:h,handleFilterReset:g})=>[m("div",Ee,[l(b,{direction:"vertical"},{default:o(()=>[l(M,{"model-value":i[0],onInput:y=>p([y])},null,8,["model-value","onInput"]),m("div",Ie,[l(s,{onClick:h},{default:o(()=>[u("搜索")]),_:2},1032,["onClick"]),l(s,{onClick:g},{default:o(()=>[u("重置")]),_:2},1032,["onClick"])])]),_:2},1024)])]),"motherRingNumber-filter":o(({filterValue:i,setFilterValue:p,handleFilterConfirm:h,handleFilterReset:g})=>[m("div",Pe,[l(b,{direction:"vertical"},{default:o(()=>[l(M,{"model-value":i[0],onInput:y=>p([y])},null,8,["model-value","onInput"]),m("div",De,[l(s,{onClick:h},{default:o(()=>[u("搜索")]),_:2},1032,["onClick"]),l(s,{onClick:g},{default:o(()=>[u("重置")]),_:2},1032,["onClick"])])]),_:2},1024)])]),"yan-filter":o(({filterValue:i,setFilterValue:p,handleFilterConfirm:h,handleFilterReset:g})=>[m("div",Ue,[l(b,{direction:"vertical"},{default:o(()=>[l(M,{"model-value":i[0],onInput:y=>p([y])},null,8,["model-value","onInput"]),m("div",Te,[l(s,{onClick:h},{default:o(()=>[u("搜索")]),_:2},1032,["onClick"]),l(s,{onClick:g},{default:o(()=>[u("重置")]),_:2},1032,["onClick"])])]),_:2},1024)])]),"ys-filter":o(({filterValue:i,setFilterValue:p,handleFilterConfirm:h,handleFilterReset:g})=>[m("div",Fe,[l(b,{direction:"vertical"},{default:o(()=>[l(M,{"model-value":i[0],onInput:y=>p([y])},null,8,["model-value","onInput"]),m("div",je,[l(s,{onClick:h},{default:o(()=>[u("搜索")]),_:2},1032,["onClick"]),l(s,{onClick:g},{default:o(()=>[u("重置")]),_:2},1032,["onClick"])])]),_:2},1024)])]),"lx-filter":o(({filterValue:i,setFilterValue:p,handleFilterConfirm:h,handleFilterReset:g})=>[m("div",Ge,[l(b,{direction:"vertical"},{default:o(()=>[l(M,{"model-value":i[0],onInput:y=>p([y])},null,8,["model-value","onInput"]),m("div",Le,[l(s,{onClick:h},{default:o(()=>[u("搜索")]),_:2},1032,["onClick"]),l(s,{onClick:g},{default:o(()=>[u("重置")]),_:2},1032,["onClick"])])]),_:2},1024)])]),"state-filter":o(({filterValue:i,setFilterValue:p,handleFilterConfirm:h,handleFilterReset:g})=>[m("div",Ke,[l(b,{direction:"vertical"},{default:o(()=>[l(M,{"model-value":i[0],onInput:y=>p([y])},null,8,["model-value","onInput"]),m("div",Re,[l(s,{onClick:h},{default:o(()=>[u("搜索")]),_:2},1032,["onClick"]),l(s,{onClick:g},{default:o(()=>[u("重置")]),_:2},1032,["onClick"])])]),_:2},1024)])]),"jb-filter":o(({filterValue:i,setFilterValue:p,handleFilterConfirm:h,handleFilterReset:g})=>[m("div",Ae,[l(b,{direction:"vertical"},{default:o(()=>[l(M,{"model-value":i[0],onInput:y=>p([y])},null,8,["model-value","onInput"]),m("div",qe,[l(s,{onClick:h},{default:o(()=>[u("搜索")]),_:2},1032,["onClick"]),l(s,{onClick:g},{default:o(()=>[u("重置")]),_:2},1032,["onClick"])])]),_:2},1024)])]),"remark-filter":o(({filterValue:i,setFilterValue:p,handleFilterConfirm:h,handleFilterReset:g})=>[m("div",We,[l(b,{direction:"vertical"},{default:o(()=>[l(M,{"model-value":i[0],onInput:y=>p([y])},null,8,["model-value","onInput"]),m("div",Je,[l(s,{onClick:h},{default:o(()=>[u("搜索")]),_:2},1032,["onClick"]),l(s,{onClick:g},{default:o(()=>[u("重置")]),_:2},1032,["onClick"])])]),_:2},1024)])]),_:1},8,["columns","data","selectedKeys","pagination","onPageSizeChange","onPageChange"]),l(S,{visible:a.editModal.visible,"onUpdate:visible":e[30]||(e[30]=i=>a.editModal.visible=i),title:a.editModal.title,width:"calc(520px + 0.1 * 100vw)",onBeforeOk:r.handleEditPigeon,onCancel:r.handleEditCancel,onBeforeOpen:r.handleBeforeOpen},{default:o(()=>[l(z,{model:a.form,disabled:a.editModal.disabled},{default:o(()=>[l(_,{label:"足环",extra:"由“-”组合成足环","content-flex":!1,"merge-props":!1,required:""},{default:o(()=>[l(T,{wrap:!1,gutter:1},{default:o(()=>[l(O,{flex:"1"},{default:o(()=>[l(_,{field:"country","validate-trigger":"blur","hide-asterisk":!0,required:""},{default:o(()=>[l(w,{modelValue:a.form.country,"onUpdate:modelValue":e[17]||(e[17]=i=>a.form.country=i),modelModifiers:{lazy:!0},options:a.options.countryOptions,placeholder:"-国家-","allow-search":""},null,8,["modelValue","options"])]),_:1})]),_:1}),l(O,{flex:"1"},{default:o(()=>[l(_,{field:"year","validate-trigger":"blur","hide-asterisk":!0,required:""},{default:o(()=>[l($,{modelValue:a.form.year,"onUpdate:modelValue":e[18]||(e[18]=i=>a.form.year=i),modelModifiers:{lazy:!0}},null,8,["modelValue"])]),_:1})]),_:1}),l(O,{flex:"1"},{default:o(()=>[l(_,{field:"province","validate-trigger":"blur","hide-asterisk":!0,required:""},{default:o(()=>[l(w,{modelValue:a.form.province,"onUpdate:modelValue":e[19]||(e[19]=i=>a.form.province=i),modelModifiers:{lazy:!0},options:a.options.provinceOptions,placeholder:"-省份-","allow-search":""},null,8,["modelValue","options"])]),_:1})]),_:1}),l(O,{flex:"1"},{default:o(()=>[l(_,{field:"code","validate-trigger":"blur","hide-asterisk":!0,required:""},{default:o(()=>[l(M,{modelValue:a.form.code,"onUpdate:modelValue":e[20]||(e[20]=i=>a.form.code=i),modelModifiers:{lazy:!0},placeholder:"编号"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(_,{label:"名称",field:"name"},{default:o(()=>[l(M,{modelValue:a.form.name,"onUpdate:modelValue":e[21]||(e[21]=i=>a.form.name=i),modelModifiers:{lazy:!0},placeholder:"名称"},null,8,["modelValue"])]),_:1}),l(_,{label:"血统",field:"bloodline"},{default:o(()=>[l(M,{modelValue:a.form.bloodline,"onUpdate:modelValue":e[22]||(e[22]=i=>a.form.bloodline=i),modelModifiers:{lazy:!0},placeholder:"血统"},null,8,["modelValue"])]),_:1}),l(_,{label:"眼砂",field:"yan"},{default:o(()=>[l(w,{modelValue:a.form.yan,"onUpdate:modelValue":e[23]||(e[23]=i=>a.form.yan=i),modelModifiers:{lazy:!0},options:a.options.yanpzOptions,placeholder:"-眼砂-","allow-search":""},null,8,["modelValue","options"])]),_:1}),l(_,{label:"羽色",field:"ys"},{default:o(()=>[l(w,{modelValue:a.form.ys,"onUpdate:modelValue":e[24]||(e[24]=i=>a.form.ys=i),modelModifiers:{lazy:!0},options:a.options.yspzOptions,placeholder:"-羽色-","allow-search":""},null,8,["modelValue","options"])]),_:1}),l(_,{label:"类型",field:"lx"},{default:o(()=>[l(w,{modelValue:a.form.lx,"onUpdate:modelValue":e[25]||(e[25]=i=>a.form.lx=i),modelModifiers:{lazy:!0},options:a.options.lxpzOptions,placeholder:"-类型-","allow-search":""},null,8,["modelValue","options"])]),_:1}),l(_,{label:"状态",field:"state"},{default:o(()=>[l(w,{modelValue:a.form.state,"onUpdate:modelValue":e[26]||(e[26]=i=>a.form.state=i),modelModifiers:{lazy:!0},options:a.options.stateOptions,placeholder:"-状态-","allow-search":""},null,8,["modelValue","options"])]),_:1}),l(_,{label:"级别",field:"jb"},{default:o(()=>[l(w,{modelValue:a.form.jb,"onUpdate:modelValue":e[27]||(e[27]=i=>a.form.jb=i),modelModifiers:{lazy:!0},options:a.options.jbpzOptions,placeholder:"-级别-","allow-search":""},null,8,["modelValue","options"])]),_:1}),l(_,{label:"赛绩鸽",field:"isGrade"},{default:o(()=>[l(w,{modelValue:a.form.isGrade,"onUpdate:modelValue":e[28]||(e[28]=i=>a.form.isGrade=i),modelModifiers:{lazy:!0},options:["否","是"],placeholder:"-赛绩鸽-"},null,8,["modelValue"])]),_:1}),l(_,{label:"备注",field:"remark",extra:"允许换行输入"},{default:o(()=>[l(F,{modelValue:a.form.remark,"onUpdate:modelValue":e[29]||(e[29]=i=>a.form.remark=i),modelModifiers:{lazy:!0},"auto-size":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","disabled"])]),_:1},8,["visible","title","onBeforeOk","onCancel","onBeforeOpen"]),l(S,{visible:a.batchEditModal.visible,"onUpdate:visible":e[32]||(e[32]=i=>a.batchEditModal.visible=i),title:a.batchEditModal.title,width:"calc(300px + 0.12 * 100vw)",onBeforeOk:r.handleEditBatch,onCancel:r.handleCancel},{default:o(()=>[l(z,{model:a.batchEditModal},{default:o(()=>[l(_,{label:a.batchEditModal.label,field:a.batchEditModal.field},{default:o(()=>[l(w,{modelValue:a.batchEditModal.data,"onUpdate:modelValue":e[31]||(e[31]=i=>a.batchEditModal.data=i),modelModifiers:{lazy:!0},options:a.batchEditModal.options,placeholder:a.batchEditModal.label,"allow-search":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label","field"])]),_:1},8,["model"])]),_:1},8,["visible","title","onBeforeOk","onCancel"]),l(S,{visible:a.batchShareModal.visible,"onUpdate:visible":e[34]||(e[34]=i=>a.batchShareModal.visible=i),title:"批量分享血统",width:"calc(300px + 0.12 * 100vw)",onBeforeOk:r.handleShareBatch,onCancel:r.handleCancel},{default:o(()=>[l(z,{model:a.batchShareModal},{default:o(()=>[l(_,{label:"管理员名称",field:"gid"},{default:o(()=>[l(w,{modelValue:a.batchShareModal.gid,"onUpdate:modelValue":e[33]||(e[33]=i=>a.batchShareModal.gid=i),modelModifiers:{lazy:!0},options:a.batchShareModal.options,placeholder:"选择对方的管理员名称","allow-search":""},null,8,["modelValue","options"])]),_:1})]),_:1},8,["model"]),He]),_:1},8,["visible","onBeforeOk","onCancel"]),l(S,{visible:a.batchGpcxModal.visible,"onUpdate:visible":e[36]||(e[36]=i=>a.batchGpcxModal.visible=i),title:"批量加入鸽棚巢箱",width:"calc(300px + 0.12 * 100vw)",onBeforeOk:r.handleGpcxBatch,onCancel:r.handleCancel},{default:o(()=>[l(z,{model:a.batchGpcxModal},{default:o(()=>[l(_,{label:"鸽棚巢箱名称",field:"id"},{default:o(()=>[l(w,{modelValue:a.batchGpcxModal.id,"onUpdate:modelValue":e[35]||(e[35]=i=>a.batchGpcxModal.id=i),modelModifiers:{lazy:!0},options:a.batchGpcxModal.options,placeholder:"选择鸽棚巢箱","allow-search":""},null,8,["modelValue","options"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","onBeforeOk","onCancel"]),l(S,{visible:a.fileModal.visible,"onUpdate:visible":e[37]||(e[37]=i=>a.fileModal.visible=i),title:"文件快速导入",top:"10","align-center":!1,draggable:"",onCancel:r.handleCancel,footer:!1},{default:o(()=>[l(ee,{draggable:"","custom-request":r.handleFileUpload,tip:"上传.xls\\.xlsx文件",accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},null,8,["custom-request"])]),_:1},8,["visible","onCancel"]),l(S,{visible:a.batchLogModal.visible,"onUpdate:visible":e[39]||(e[39]=i=>a.batchLogModal.visible=i),title:"填写日志",width:"calc(300px + 0.12 * 100vw)",onBeforeOk:r.handleLogBatch,onCancel:r.handleCancel},{default:o(()=>[l(z,{model:a.batchLogModal},{default:o(()=>[l(_,{label:"日志内容"},{default:o(()=>[l(F,{modelValue:a.batchLogModal.log,"onUpdate:modelValue":e[38]||(e[38]=i=>a.batchLogModal.log=i),modelModifiers:{lazy:!0}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","onBeforeOk","onCancel"])],64)}const Ye=te(ke,[["render",Ze],["__scopeId","data-v-0a454b50"]]);export{Ye as default};
